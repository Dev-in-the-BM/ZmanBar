var z=Object.create;var f=Object.defineProperty;var G=Object.getOwnPropertyDescriptor;var K=Object.getOwnPropertyNames;var $=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty;var q=(e,r)=>{for(var n in r)f(e,n,{get:r[n],enumerable:!0})},v=(e,r,n,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of K(r))!R.call(e,s)&&s!==n&&f(e,s,{get:()=>r[s],enumerable:!(o=G(r,s))||o.enumerable});return e};var P=(e,r,n)=>(n=e!=null?z($(e)):{},v(r||!e||!e.__esModule?f(n,"default",{value:e,enumerable:!0}):n,e)),_=e=>v(f({},"__esModule",{value:!0}),e);var Z={};q(Z,{JewishMonth:()=>t,calcDaysInMonth:()=>V,convertNumberToHebrew:()=>J,formatJewishDate:()=>k,formatJewishDateInHebrew:()=>X,getIndexByJewishMonth:()=>y,getJewishMonthByIndex:()=>H,getJewishMonthInHebrew:()=>B,getJewishMonthsInOrder:()=>j,isLeapYear:()=>M,toGregorianDate:()=>U,toHebrewJewishDate:()=>S,toJewishDate:()=>Q});var t={None:"None",Tishri:"Tishri",Cheshvan:"Cheshvan",Kislev:"Kislev",Tevet:"Tevet",Shevat:"Shevat",Adar:"Adar",Nisan:"Nisan",Iyyar:"Iyyar",Sivan:"Sivan",Tammuz:"Tammuz",Av:"Av",Elul:"Elul",AdarI:"AdarI",AdarII:"AdarII"};var x=17214255e-1,L=347995.5;function c(e,r){return e-r*Math.floor(e/r)}function D(e){return e%4===0&&!(e%100===0&&e%400!==0)}function d(e,r,n){return x-1+365*(e-1)+Math.floor((e-1)/4)+-Math.floor((e-1)/100)+Math.floor((e-1)/400)+Math.floor((367*r-362)/12+(r<=2?0:D(e)?-1:-2)+n)}function A(e){let r=Math.floor(e-.5)+.5,n=r-x,o=Math.floor(n/146097),s=c(n,146097),a=Math.floor(s/36524),h=c(s,36524),b=Math.floor(h/1461),i=c(h,1461),p=Math.floor(i/365),u=o*400+a*100+b*4+p;a===4||p===4||u++;let C=r-d(u,1,1),Y=r<d(u,3,1)?0:D(u)?1:2,I=Math.floor(((C+Y)*12+373)/367),O=r-d(u,I,1)+1;return[u,I,O]}function g(e){return c(e*7+1,19)<7}function W(e){return g(e)?13:12}function l(e){let r=Math.floor((235*e-234)/19),n=12084+13753*r,o=r*29+Math.floor(n/25920);return c(3*(o+1),7)<3&&o++,o}function F(e){let r=l(e-1),n=l(e);return l(e+1)-n===356?2:n-r===382?1:0}function T(e){return m(e+1,7,1)-m(e,7,1)}function w(e,r){return r===2||r===4||r===6||r===10||r===13||r===12&&!g(e)||r===8&&c(T(e),10)!==5||r===9&&c(T(e),10)===3?29:30}function m(e,r,n){let o,s=W(e),a=L+l(e)+F(e)+n+1;if(r<7){for(o=7;o<=s;o++)a+=w(e,o);for(o=1;o<r;o++)a+=w(e,o)}else for(o=7;o<r;o++)a+=w(e,o);return a}function N(e){let n,o,s=Math.floor(e)+.5,a=Math.floor((s-347995.5)*98496/35975351);n=a-1;for(let i=a;s>=m(i,7,1);i++)n++;let h=s<m(n,1,1)?7:1;o=h;for(let i=h;s>m(n,i,w(n,i));i++)o++;let b=s-m(n,o,1)+1;return[n,o,b]}var M=e=>{let r=e%19;return r===0||r===3||r===6||r===8||r===11||r===14||r===17},y=e=>({[t.None]:0,[t.Tishri]:7,[t.Cheshvan]:8,[t.Kislev]:9,[t.Tevet]:10,[t.Shevat]:11,[t.Adar]:12,[t.AdarI]:12,[t.AdarII]:13,[t.Nisan]:1,[t.Iyyar]:2,[t.Sivan]:3,[t.Tammuz]:4,[t.Av]:5,[t.Elul]:6})[e]||0,H=(e,r)=>{let o=[t.None,t.Nisan,t.Iyyar,t.Sivan,t.Tammuz,t.Av,t.Elul,t.Tishri,t.Cheshvan,t.Kislev,t.Tevet,t.Shevat,t.Adar,t.AdarII][e]||t.None;return o===t.Adar&&M(r)?t.AdarI:o},j=e=>{let r=[t.None,t.Tishri,t.Cheshvan,t.Kislev,t.Tevet,t.Shevat,t.AdarI,t.AdarII,t.Nisan,t.Iyyar,t.Sivan,t.Tammuz,t.Av,t.Elul];return M(e)?r:r.filter(n=>n!=="AdarII").map(n=>n==="AdarI"?"Adar":n)},k=e=>`${e.day} ${e.monthName} ${e.year}`,Q=e=>{let r=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),s=d(r,n,o),a=N(s),h=a[0],b=H(a[1],h),i=j(h).findIndex(u=>u===b);return{year:h,monthName:b,month:i,day:a[2]}},U=e=>{let r=y(e.monthName),n=m(e.year,r,e.day),o=A(n),s=new Date;return s.setFullYear(o[0],o[1]-1,o[2]),s.getHours()>0&&s.setHours(0,0,0,0),s},V=(e,r)=>{let n=y(r);return w(e,n)};

// ----------------------------------------------------------------------
// GJS COMPATIBILITY FIX:
// 1. We deleted the external dependency 'gematriya' (var E=P(require("gematriya"))).
// 2. We are replacing the Hebrew number formatting functions (J, S, X)
//    with a simple function that uses Gregorian numbers, which is safe for GJS.
// ----------------------------------------------------------------------

// Replacement formatter (simple string, e.g., "29 Elul 5786")
function formatJewishDateInGJS(dateObject) {
    // Uses the internal functions/objects: k (formatJewishDate) and Q (toJewishDate)
    return k(dateObject); 
}

// Export only the core, working functions.
export {
    // Q is the internal name for the toJewishDate function
    Q as toJewishDate,
    // We export our safe GJS formatter under the expected name
    formatJewishDateInGJS as formatJewishDateInHebrew
};
